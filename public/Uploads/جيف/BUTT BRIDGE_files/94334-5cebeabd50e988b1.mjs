"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[94334],{363534:(e,t,a)=>{var i;a.r(t),a.d(t,{default:()=>s});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCanPerformAction_board",selections:[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratedByMe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratorPermissions",storageKey:null}],type:"Board",abstractKey:null};n.hash="416539a057718ff36ac5d9d06916c2d4";let s=n},844107:(e,t,a)=>{var i;a.r(t),a.d(t,{default:()=>s});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetFeedbackType_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"followedByMe",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"explicitlyFollowedByMe",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinRecommendationReason",kind:"LinkedField",name:"recommendationReason",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"reason",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:i,storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="09058e2c22f768d113516b357e48e9cd";let s=n},748722:(e,t,a)=>{a.d(t,{Z:()=>n});var i=a(339001);function n({altText:e,autoAltText:t,i18n:a}){let n=e?(0,i.nk)(a._('This contains: {{ altText }}', 'web.altText', 'Alt text input by a human'),{altText:e}).join(""):"",s=t?(0,i.nk)(a._('This may contain: {{ autoAltText }}', 'web.altText', 'Alt text generated by a computer'),{autoAltText:t}).join(""):"";return n||s||""}},496669:(e,t,a)=>{a.d(t,{Z:()=>u});var i=a(667294),n=a(545007),s=a(883119),r=a(140017),l=a(923368),o=a(785893);function c({isCloseupButton:e,isDisabled:t,isFavorited:a,onTap:i,size:n}){let c=(0,r.ZP)(),{stackedCloseupEnabled:d}=(0,l.x4)();return e?(0,o.jsx)(s.hU,{accessibilityLabel:c._('Favorite icon', 'pinRep.footer.favoriteIcon', 'Accessible label for favorite icon on Pin'),bgColor:d?"white":void 0,disabled:t,icon:a?"star":"star-outline",iconColor:"darkGray",onClick:i,size:"lg"}):(0,o.jsx)(s.iP,{disabled:t,onTap:i,children:(0,o.jsx)(s.JO,{accessibilityLabel:c._('Favorite icon', 'pinRep.footer.favoriteIcon', 'Accessible label for favorite icon on Pin'),color:"default",icon:a?"star":"star-outline",size:n})})}var d=a(372085);function u({favorited:e,favoriteCount:t,isCloseupButton:a,onFavorite:l,onUnfavorite:u,pinId:p,size:_}){let h=(0,r.ZP)(),b=(0,n.I0)(),[m,f]=(0,i.useState)(!1),[y,g]=(0,i.useState)(e),[v,A]=(0,i.useState)(t??0),E=async()=>{(g(!y),f(!0),y)?(A(v-1),await b(async e=>{await (0,d.Z)({url:`/v3/pins/${p}/favorite/`,method:"DELETE"}),e({type:"PIN_FAVORITE",payload:{id:p,increment:-1,value:!1}})}),u()):(A(v+1),await b(async e=>{await (0,d.Z)({url:`/v3/pins/${p}/favorite/`,method:"POST"}),e({type:"PIN_FAVORITE",payload:{id:p,increment:1,value:!0}})}),l()),f(!1)},P=v<10?v:h._('9+', 'favoriteButton.favoriteCountText', 'Text shown when greater than 9 favorites on Pin');return(0,o.jsxs)(s.kC,{alignItems:"center",gap:{row:1,column:0},children:[void 0!==t&&v>0&&(0,o.jsx)(s.xv,{size:"200",weight:"bold",children:P}),(0,o.jsx)(c,{isCloseupButton:a,isDisabled:m,isFavorited:y,onTap:()=>{E()},size:_})]})}},456281:(e,t,a)=>{a.d(t,{hb:()=>i,iM:()=>n,wM:()=>r,xP:()=>s});let i=Object.freeze({CONTROL:"control",ENABLED_PIN_TYPE:"enabled_pin_type",ENABLED_SURFACE:"enabled_surface",ENABLED_INTEREST:"enabled_interest",ENABLED_IMAGE_TYPE:"enabled_image_type",CONTROL_PWT:"control_pwt",ENABLED_PWT:"enabled_pwt",EMPLOYEES:"employees"}),n=Object.freeze({CONTROL:"control",ENABLED_FOOTER:"enabled_4_indicator",ENABLED_FOOTER_BLUE:"enabled_5_indicator",ENABLED_OVERLAY:"enabled_2_indicator",ENABLED_OVERLAY_ANIMATED:"enabled_3_indicator",CONTROL_PWT:"control_pwt",ENABLED_PWT:"enabled_pwt",EMPLOYEES:"employees"}),s=["RelatedPinGrid","AuthHomefeed","SearchItemHighShoppingIntent","SearchItem","PdpRelatedPinGrid"];function r({experimentsClient:e,fields:t}){let a=e.checkExperiment("web_shopping_indicators_2",{dangerouslySkipActivation:!0}).group;return([i.CONTROL_PWT,i.ENABLED_PWT].includes(a)&&e.checkExperiment("web_shopping_indicators_2"),[i.CONTROL,i.ENABLED_PIN_TYPE,i.ENABLED_SURFACE,i.ENABLED_INTEREST,i.ENABLED_IMAGE_TYPE,i.EMPLOYEES,i.ENABLED_PWT].includes(a))?[...t,"pin.is_shoppable","pin.image_top_interest_id","pin.shopping_image_style"]:t}},343902:(e,t,a)=>{a.d(t,{N:()=>r,Z:()=>s});var i=a(883119),n=a(785893);function s({children:e,fullWidth:t}){return(0,n.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",width:t?"100%":void 0}},"data-test-id":"pointer-events-wrapper",children:e})}function r({children:e,enabled:t}){return t?(0,n.jsx)(s,{children:e}):e}},551539:(e,t,a)=>{a.d(t,{Z:()=>i});function i(e,t){return e.isAuth&&t===e.id}},367106:(e,t,a)=>{a.d(t,{Z:()=>i});function i(e,t){return!!(t.isAuth&&e)}},580716:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(551539),n=a(367106);function s(e,t,a){return(0,i.Z)(a,t)||(0,n.Z)(e,a)}},849118:(e,t,a)=>{a.d(t,{P:()=>o,Z:()=>d});var i,n=a(667294);a(167912);var s=a(551539),r=a(367106),l=a(207012);let o=e=>{let{action:t,viewer:a,board:i}=e;return!!i&&((0,s.Z)(a,i.owner?.entityId)||(0,r.Z)(i.collaboratedByMe,a)&&!!i.collaboratorPermissions?.includes(t))},c=void 0!==i?i:i=a(363534);function d({boardKey:e}){let t=(0,l.Z)(c,e),a=t?.owner?.entityId??"",i=(0,n.useMemo)(()=>t?.collaboratorPermissions,[t?.entityId]);return{canPerformAction:(0,n.useCallback)(({action:e,viewer:n})=>o({action:e,viewer:n,board:{collaboratedByMe:t?.collaboratedByMe,collaboratorPermissions:i,owner:a?{entityId:a}:null}}),[t?.collaboratedByMe,i,a])}}},259866:(e,t,a)=>{a.d(t,{Z:()=>i});function i(e){return function e(t,a){let i;if(null==t||"object"!=typeof t&&"function"!=typeof t)return t;let n=a.find(e=>e.value===t);if(n)return n.result;let s=Object.prototype.toString.call(t);switch(s){case"[object Array]":i=Array(t.length);break;case"[object Set]":i=new Set;break;case"[object Object]":case"[object Arguments]":i={};break;case"[object Map]":i=new Map;break;default:return t}let r=[...a,{value:t,result:i}];switch(s){case"[object Array]":t.forEach((t,a)=>{i[a]=e(t,r)});break;case"[object Set]":t.forEach(t=>{i.add(e(t,r))});break;case"[object Object]":case"[object Arguments]":Object.entries(t).forEach(([t,a])=>{i[t]=e(a,r)});break;case"[object Map]":t.forEach((t,a)=>{i.set(a,e(t,r))})}return i}(e,[])}},422210:(e,t,a)=>{a.d(t,{Z:()=>i});function i(e){if(!e)return!1;let t=new Date(e);return t.setDate(t.getDate()+28),new Date().getTime()<t.getTime()}},650059:(e,t,a)=>{a.d(t,{G7:()=>c,Nl:()=>u,WE:()=>o,l6:()=>d,rh:()=>l});var i=a(481177),n=a(135839),s=a(427514);let r=e=>e.checkExperiment("web_ps4p").anyEnabled;function l(e,t,a,n){if(!t.isAuth)return!1;let{creatorAnalytics:s}=e,l=!!e.storyPinDataId,o=!!e.videos?.videoList,c=!(l||o)&&0!==Object.keys(e.aggregatedPinData?.creatorAnalytics?._30dRealtime||{}).length,d=e.board?.privacy===i.Z.BoardPrivacy.PUBLIC,u=(e.board?.privacy===i.Z.BoardPrivacy.PROTECTED||d)&&!e.isRepin&&[t.id,n].includes(e.pinner?.entityId);return c||0!==Object.keys(s?._30dRealtime||{}).length||t.isPartner&&u||r(a)&&l&&u}function o(e,t,a,i,n,s){return e.isAuth&&!!t&&(a||i)&&!!n?.isLoaded&&!s}function c(e,t){return(0,s.Z)(t.ngettext('Last {{ count }} Day', 'Last {{ count }} Days', e, 'Previous {{ count }} days from current date', 'Previous {{ count }} days from current date'),{count:e})}function d(e,t){return(0,s.Z)(t.ngettext('Last {{ count }} Hour', 'Last {{ count }} Hours', e, 'analytics.utils', 'Previous {{ count }} hours from current time'),{count:e})}function u({i18n:e,isRealtime:t,humanizedTimeSinceLastUpdate:a,displayLifetime:i,numDays:r,selectedDateRange:l,locale:o}){let c=[];if(r){let t=i?(0,s.Z)(e.ngettext('Percent changes are compared to {{n}} day before {{startDate}} \u2013 {{endDate}}.', 'Percent changes are compared to {{n}} days before {{startDate}} \u2013 {{endDate}}.', r, 'pinstats.toplineMetrics.description', 'Label describing how deltas are calculated and when performance over time metrics are updated'),{n:r,startDate:(0,n.Z)(o,l.startDate,n.k.NUMERIC),endDate:(0,n.Z)(o,l.endDate,n.k.NUMERIC)}):(0,s.Z)(e.ngettext('Percent changes are compared to {{n}} day before the selected date range.', 'Percent changes are compared to {{n}} days before the selected date range.', r, 'pinstats.toplineMetrics.description', 'Label describing how deltas are calculated and when performance over time metrics are updated'),{n:r});c.push(t)}return t?c.push(e._('Metrics are updated in real-time.', 'pinstats.PinnerToplineMetrics.description', 'Label describing when lifetime of pin metrics are updated')):a&&c.push((0,s.Z)(e._('Metrics updated {{ timeSince }}.', 'analytics.header.disclaimer.metricsUpdated', 'Disclaimer describing when data was last updated. timeSince: time period since last update (ex: 1 day)'),{timeSince:a})),c.join(" ")}},934441:(e,t,a)=>{a.d(t,{GY:()=>A,Jg:()=>v,fW:()=>E});var i=a(184508),n=a(147916),s=a(167361),r=a(697031),l=a(404247),o=a(836866),c=a(620668),d=a(86119),u=a(753873),p=a(873774),_=a(479197),h=a(110099),b=a(244892),m=a(485846),f=a(461471),y=a(662502),g=a(239784);let v=["goodIdea","love","thanks","wow","haha"],A={7:"goodIdea",1:"love",13:"thanks",11:"wow",5:"haha"},E=(e,t,a="darkGray")=>{let v={default:{staticAsset:"white"===a?_:p},goodIdea:{staticAsset:s,animatedAsset:i,gridAsset:n,label:t._('Good idea', 'Reaction label to tell a creator that their pin is a good idea', 'Reaction label to tell a creator that their pin is a good idea'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:7},haha:{staticAsset:o,animatedAsset:r,gridAsset:l,label:t._('Haha', 'Reaction label to tell a creator that the pinner laughed because of their pin', 'Reaction label to tell a creator that the pinner laughed because of their pin'),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:5},love:{staticAsset:u,animatedAsset:c,gridAsset:d,label:t._('Love', 'Reaction label to tell a creator that the pinner loved their pin', 'Reaction label to tell a creator that the pinner loved their pin'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:1},thanks:{staticAsset:m,animatedAsset:h,gridAsset:b,label:t._('Thanks', 'Reaction label to tell a creator thank you', 'Reaction label to tell a creator thank you'),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:13},wow:{staticAsset:g,animatedAsset:f,gridAsset:y,label:t._('Wow', 'Reaction label to tell a creator that the pinner was wowed by their pin', 'Reaction label to tell a creator that the pinner was wowed by their pin'),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:11}};return v[e]||v.default}},356621:(e,t,a)=>{function i(e){let t=Object.keys(e);return t.length>0?t.sort((t,a)=>e[a]-e[t]).slice(0,3):null}function n(e){let t=Object.values(e);return t.length>0?t.reduce((e,t)=>e+t,0):0}function s(e,t,a){return!e.isPromoted&&!e.isDownstreamPromotion&&!!(e.videos?.entityId||e.storyPinDataId)&&!t&&(!e.board?.isCollaborative||!e.board.collaboratedByMe)&&!a}a.d(t,{At:()=>i,J6:()=>s,Ud:()=>n})},649817:(e,t,a)=>{a.d(t,{GZ:()=>i,OE:()=>n,zX:()=>s});let i=246,n=197,s=236},361747:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(883119),n=a(140017),s=a(785893);function r({height:e,isDenseView:t,rounding:a,width:r,color:l}){let o=(0,n.ZP)();return(0,s.jsx)(i.xu,{alignItems:"center",color:l||"default","data-test-id":"unavailable-pin",display:"flex",height:e,justifyContent:"center",overflow:"hidden",position:"relative",rounding:a,width:r,children:(0,s.jsxs)(i.kC,{alignItems:"center",direction:"column",children:[(0,s.jsx)(i.xu,{paddingY:t?2:4,children:(0,s.jsx)(i.JO,{accessibilityLabel:o._('Pin not available', 'story-pin.Closeup.UnavailableIdeaPin.icon.accessibilityLabel', 'Accessibility label on icon'),color:"default",icon:"alert",size:20})}),(0,s.jsx)(i.xv,{weight:"bold",children:o._('Unavailable', 'story-pin.Closeup.UnavailableIdeaPin.Unavailable', 'Text on an unavailable idea Pin that has been deleted')}),!t&&(0,s.jsx)(i.xu,{paddingY:1,children:(0,s.jsx)(i.xv,{children:o._('Removed by the creator', 'story-pin.Closeup.UnavailableIdeaPin.Removed', 'Text on an unavailable idea Pin explaining it has been removed by its creator')})})]})})}},631602:(e,t,a)=>{a.d(t,{Z:()=>_});var i=a(667294),n=a(973935),s=a(785893);function r(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let l=new Map,o=null,c=e=>{e.forEach(e=>{let t=l.get(e.target);t&&t(e)})},d=e=>{o.unobserve(e),l.delete(e)},u=(e,t="-64px 0px 0px 0px",a)=>{let i={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:t,threshold:[0,.5,1]};o=o||new window.IntersectionObserver(c,i),l.set(e,a),o.observe(e)},p=e=>l.has(e),_=e=>{class t extends i.Component{constructor(...e){super(...e),r(this,"seen",!1),r(this,"enter",e=>{let t=e.intersectionRatio>0||e.isIntersecting;this.seen=t,this.seen&&this.props.onVisibilityChanged(!0)}),r(this,"leave",()=>{let e=this._node;e&&p(e)&&this.seen&&(this.props.onVisibilityChanged(!1),this.seen=!1)}),r(this,"observe",e=>{try{this._node=n.findDOMNode(this)}catch(e){return}if(!this._node)return;let t=this._node;u(t,e,e=>{if(!l.has(t))return;let a=this.props.trackFullVisible?e.intersectionRatio>=1:e.intersectionRatio>=.5,i=this.props.trackFullVisible?0===e.intersectionRatio:!a;!this.seen&&a?this.enter(e):this.seen&&i&&this.leave()})})}componentDidMount(){let{rootMargin:e}=this.props;this.observe(e)}componentWillUnmount(){let e=this._node;e&&(this.leave(),d(e))}render(){return(0,s.jsx)(e,{...this.props})}}return r(t,"displayName",`DeprecatedWithVisibilityChanged(${e.displayName||e.name})`),t}},363074:(e,t,a)=>{a.d(t,{Z:()=>d});var i=a(667294);let n=new Map,s=null,r=e=>{e.forEach(e=>{let t=n.get(e.target);t&&t(e)})},l=e=>{s.unobserve(e),n.delete(e)},o=(e,t="-64px 0px 0px 0px",a)=>{let i={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:t,threshold:[0,.5,1]};s=s||new window.IntersectionObserver(r,i),n.set(e,a),s.observe(e)},c=e=>n.has(e);function d({onVisibilityChanged:e,trackFullVisible:t,rootMargin:a}){let s=(0,i.useRef)(null),r=!1,d=t=>{(r=t.intersectionRatio>0||t.isIntersecting)&&e(!0)},u=()=>{s.current instanceof HTMLElement&&c(s.current)&&r&&(e(!1),r=!1)},p=(0,i.useCallback)(e=>{s.current instanceof HTMLElement&&o(s.current,e,e=>{if(!n.has(s.current))return;let a=t?e.intersectionRatio>=1:e.intersectionRatio>=.5,i=t?0===e.intersectionRatio:!a;!r&&a?d(e):r&&i&&u()})},[s.current]);return(0,i.useEffect)(()=>(p(a),()=>{s.current instanceof HTMLElement&&(u(),l(s.current))}),[p]),s}},626849:(e,t,a)=>{a.d(t,{Z:()=>i});function i(e,t){let{organicVideosAutoplaying:a,promotedVideosAutoplaying:i}=t,n={...a,...i};return n[e]&&n[e].currentTime}},158838:(e,t,a)=>{a.d(t,{Q6:()=>n,ZP:()=>r,t2:()=>s});let i=()=>!window?.devicePixelRatio||window.devicePixelRatio<=1?"1x":"2x",n=()=>{let e;let t="undefined"!=typeof window?window.navigator?.connection?.effectiveType:void 0,a=i();return t?"4g"===t?e="40-80":(a="1x",e="0-1"):e="unknown",{downloadSpeedGroup:e,screenDimension:a}};function s({vEXP3:e,vEXP4:t,vEXP5:a,vEXP6:i,vEXP7:s,v720P:r}){let{downloadSpeedGroup:l,screenDimension:o}=n(),c={"1x":e,"2x":a},d={"1x":s,"2x":s};return({unknown:c,"0-1":c,"1-5":{"1x":t,"2x":a},"5-10":{"1x":a,"2x":a},"10-20":{"1x":i,"2x":i},"20-40":d,"40-80":d,"80_or_above":d})[l][o]||r||void 0}function r(e){let{vHLSV3MOBILE:t,...a}=e,i=s(a),n=t||void 0;return i?{hlsv3:n,mp4:i}:{hlsv3:n}}},249803:(e,t,a)=>{a.d(t,{Z:()=>i});function i(e,t){let{organicVideosAutoplaying:a,promotedVideosAutoplaying:i}=t,n={...a,...i};return!!n[e]&&!n[e].paused}},446653:(e,t,a)=>{a.d(t,{r:()=>v,K:()=>g});var i=a(667294),n=a(342513),s=a(340523),r=a(757640),l=a(149722),o=a(998577),c=a(573810),d=a(325362);let u=e=>{let t={};for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&("object"!=typeof e[a]||null===e[a]||Array.isArray(e[a])?t[(0,d.Z)(a)]=e[a]:t[(0,d.Z)(a)]=u(e[a]));return t},p=(e,t)=>{let a=[];for(let i in e)i!==t&&a.push({id:i,...u(e[i])});let i=a.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),n=new Map;for(let e of i)n.set(e.id,e);return n},_={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},h=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},b=({dispatch:e,isEnabled:t,state:a})=>{let{orbacVisibility:n,disableProfileChanger:s,headerVisible:r}=a,l=(0,i.useCallback)(a=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:a})},[t,e]);return{changeProfile:l,toggleORBACVisibility:(0,i.useCallback)(a=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:a??!n})},[t,e,n]),toggleDisableProfileChanger:(0,i.useCallback)(a=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:a??!s})},[t,e,s]),toggleHeaderVisibility:(0,i.useCallback)(a=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:a??!r})},[t,e,r])}},m=e=>{let[t,a]=(0,i.useReducer)(h,_),n=b({dispatch:a,isEnabled:e,state:t}),{activeProfile:s,orbacVisibility:r}=t;return(0,i.useEffect)(()=>{let e=(0,c.qn)("orbacActiveProfile",!1);e&&a({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,i.useEffect)(()=>{let e=(0,c.qn)("orbacVisibilty",!1);e&&a({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,i.useEffect)(()=>{(0,c.Nh)("orbacVisibility",r)},[r]),(0,i.useEffect)(()=>{(0,c.Nh)("orbacActiveProfile",s)},[s]),{state:t,actions:n,receiveProfiles:(0,i.useCallback)((e,t)=>{a({type:"LOAD_PROFILES",payload:p(e,t)})},[a])}};var f=a(785893);let{Provider:y,useMaybeHook:g}=(0,n.Z)("RoleBasedAccessControlContext"),v=({children:e})=>{let t;let{checkExperiment:a}=(0,s.F)(),n=(0,l.Z)(),c=!!(n.isAuth&&n.isPartner&&a("web_m10n_business_access_orbac_www").anyEnabled),{state:d,actions:u,receiveProfiles:p}=m(c),{activeProfile:_,headerVisible:h,profiles:b=[]}=d,g=b?Array.from(b.values()):[],v=(0,o.Z)(g),A=!!n.isAuth&&g.length>0&&v,E=n.isAuth?n.id:"",P=n.isAuth?n.username:"",{changeProfile:w,toggleORBACVisibility:x,toggleDisableProfileChanger:k,toggleHeaderVisibility:R}=u;(0,i.useEffect)(()=>{if(c){if("string"==typeof v){w(v);return}_||w(E)}},[v,E,c,w,_]),(0,i.useEffect)(()=>{c&&(A&&!h&&R(!0),!A&&h&&R(!1))},[R,A,c,h,b]);let{data:I}=(0,r.Z)(c?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),L=I?.profiles;n&&n.isAuth&&d.activeProfile===n.id?t={id:n.id,permissions:["OWNER"],user:{username:P,businessName:n.fullName,imgUrl:n.imageSmallUrl}}:_&&d.profiles&&(t=d.profiles.get(_)),(0,i.useEffect)(()=>{L&&p(L,E)},[p,L,E]);let T=d.profiles?Array.from(d.profiles.values()):[];return(0,f.jsx)(y,{value:{profiles:T,headerVisible:d.headerVisible,activeProfile:t,changeProfile:w,toggleORBACVisibility:x,toggleDisableProfileChanger:k,toggleHeaderVisibility:R},children:e})}},785059:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(340523),n=a(446653),s=a(998577);let r=()=>{let{checkExperiment:e}=(0,i.F)(),t=(0,n.K)(),{activeProfile:a}=t||{},r=e("web_m10n_business_access_orbac_www").anyEnabled,l=(0,s.Z)(t?.profiles||[]),{anyEnabled:o}=e("useorbacroutematcher_in_useorbacactingas");return r&&(!o||l)&&a&&(a.viewerMeetsMfaRequirement||(a.permissions||[]).includes("OWNER"))?a:Object.freeze({})}},998577:(e,t,a)=>{a.d(t,{Z:()=>o});var i=a(616550),n=a(96157),s=a(340523),r=a(149722),l=a(19447);let o=e=>{let t=(0,i.TH)(),a=(0,r.Z)(),o=(0,l.S6)(),{anyEnabled:c}=(0,s.F)().checkExperiment("web_m10n_business_access_orbac_www"),d=(0,i.$B)("/:username"),u=d?.params?.username,p=(0,i.$B)("/pin/:id"),_=!!p?.params?.id&&o(p.params.id)?.pinner?.id;if((0,n.ej)(t))return!1;if((0,n.RU)(t))return!0;if((0,n.mY)(t))return c;let h=e.concat(a.isAuth?{user:{username:a.username},id:a.id}:{}).find(e=>{let{user:t={},id:a}=e||{},{username:i}=t;return(!!i&&!!u||!!_&&!!a)&&(i===u||_===a)});return!!h&&h.id}},199677:(e,t,a)=>{a.d(t,{D3:()=>c,DX:()=>l,KY:()=>d,Ms:()=>i,N1:()=>u,_P:()=>r,lJ:()=>s,nl:()=>n,q6:()=>o});let i=(e,t)=>{let a=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(a=t.user.username),a},n=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),s=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",r=(e,t,a)=>a&&a.user&&t&&t.isAuth&&a.id!==t.id?a.user.merchantId:e.advertiser?.merchant_id,l=(e,t,a)=>a&&a.user&&e.isAuth&&a.id!==e.id?a.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,o=(e,t,a)=>!!(e&&e.isAuth&&a&&a.id&&a.id!==e.id&&a.id===t),c=(e,t,a)=>!!(o(e,t,a)||e&&e.isAuth&&t===e.id),d=(e,t,a)=>c(e,t&&t.owner&&t.owner.id||"",a);function u(e,t,a){return c(e,t?t.id:"",a)}},740707:(e,t,a)=>{a.d(t,{Z:()=>l}),a(422578);var i,n=a(207012),s=a(899394);let r=void 0!==i?i:i=a(844107);function l({pinKey:e,feedbackType:t,viewParameter:a}){let i=(0,n.Z)(r,e);return function({feedbackType:e,viewParameter:t,boardFollowedByMe:a,hasPromoter:i,isDownstreamPromotion:n,pinnerFollowedByMe:r,hasRecommendationReason:l,recommendationReasonHasBoard:o,recommendationReasonReason:c}){return(0,s.hP)({boardFollowedByMe:a,feedbackType:e,promotion:i?{isDownstreamPromotion:n}:void 0,pinnerFollowedByMe:r,recommendationReason:l?{hasBoard:o,reason:c}:void 0,viewParameter:t})}({feedbackType:t,viewParameter:a,boardFollowedByMe:!!i?.board?.followedByMe,hasPromoter:!!i?.promoter,isDownstreamPromotion:!!i?.isDownstreamPromotion,pinnerFollowedByMe:!!i?.pinner?.explicitlyFollowedByMe,hasRecommendationReason:!!i?.recommendationReason,recommendationReasonReason:i?.recommendationReason?.reason??void 0,recommendationReasonHasBoard:!!i?.recommendationReason?.board})}},243783:(e,t,a)=>{function i(e){let t=e.split("/");return[t[2],t[1]]}function n(e,t){return!e||!e.some(e=>e.pin_type===t)}a.d(t,{E:()=>n,J:()=>i})},324186:(e,t,a)=>{a.d(t,{C:()=>o,f:()=>l});var i=a(667294),n=a(342513),s=a(785893);let{Provider:r,useHook:l}=(0,n.Z)("MostRecentPin");function o({children:e}){let[t,a]=(0,i.useState)(),[n,l]=(0,i.useState)(),o=(0,i.useCallback)(e=>{l([e].concat((n?n.slice(0,10):[]).filter(t=>t!==e)))},[n]),c=(0,i.useMemo)(()=>({id:t,plpImageSignatures:n,setMostRecentPinId:a,setMostRecentPinImage:o}),[t,n,o]);return(0,s.jsx)(r,{value:c,children:e})}},67765:(e,t,a)=>{a.d(t,{ZP:()=>o,tY:()=>u,Xt:()=>c,$7:()=>p,Yh:()=>d});var i=a(545007),n=a(340523),s=a(757640),r=a(149722);let l={SAVE_TO_PROFILE:0,SHOW_BOARD_PICKER:1};function o(e){let t=(0,r.Z)(),a=t.isAuth&&t.id===e,{checkExperiment:i}=(0,n.F)(),l=(0,s.Z)(!t.isAuth||a?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{showEnabledSaveBehavior:a&&t.has_quicksave_board||!!(t.isAuth&&(l??{}).data?.has_quicksave_board)||(a||t.isAuth)&&!t.has_quicksave_board&&!(l??{}).data?.has_quicksave_board&&i("profile_saves_for_all").anyEnabled}}function c(e){let t=(0,r.Z)(),a=t.isAuth&&t.id===e,i=(0,s.Z)(!t.isAuth||a?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{boardlessPinsEnabled:a&&t.has_quicksave_board||!!(t.isAuth&&(i??{}).data?.has_quicksave_board)}}function d(e){let t=(0,i.I0)(),a=(0,r.Z)(),n=a.isAuth&&!!a.boardCount&&a.boardCount<5&&e,l=(0,s.Z)(n&&e?{name:"UserResource",options:{field_set_key:"save_behavior",user_id:a.isAuth&&a.id}}:null);return a.isAuth&&void 0===a.save_behavior&&l&&l.data?.id&&t({type:"UPDATE_USER_SAVE_BEHAVIOR",payload:{saveBehavior:l.data.save_behavior}}),{showEnabledSaveBehavior:n}}function u(e){let t;let a=(0,r.Z)();return e&&(a.save_behavior===l.SAVE_TO_PROFILE?t={type:"classic"}:a.save_behavior===l.SHOW_BOARD_PICKER&&(t={type:"inline"})),{saveBehaviorType:t}}function p(){let e=(0,r.Z)();return e.isAuth&&(e?.secretBoardCount??0)>0}},184508:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaAnimated-5de05cb7.svg"},147916:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaGrid-e3e37a7f.svg"},167361:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaStatic-855554b0.svg"},697031:e=>{e.exports="https://s.pinimg.com/webapp/hahaAnimated-df9cb2fa.svg"},404247:e=>{e.exports="https://s.pinimg.com/webapp/hahaGrid-7945c718.svg"},836866:e=>{e.exports="https://s.pinimg.com/webapp/hahaStatic-28ee6e1e.svg"},620668:e=>{e.exports="https://s.pinimg.com/webapp/loveAnimated-ccd5b808.svg"},86119:e=>{e.exports="https://s.pinimg.com/webapp/loveGrid-1ec7b8e4.svg"},753873:e=>{e.exports="https://s.pinimg.com/webapp/loveStatic-31fc2a99.svg"},873774:e=>{e.exports="https://s.pinimg.com/webapp/reactionHeartOutline-24ab75a6.svg"},479197:e=>{e.exports="https://s.pinimg.com/webapp/reactionHeartOutlineWhite-61cdbdb7.svg"},110099:e=>{e.exports="https://s.pinimg.com/webapp/thanksAnimated-6831daf3.svg"},244892:e=>{e.exports="https://s.pinimg.com/webapp/thanksGrid-b3cf8b93.svg"},485846:e=>{e.exports="https://s.pinimg.com/webapp/thanksStatic-51f19932.svg"},461471:e=>{e.exports="https://s.pinimg.com/webapp/wowAnimated-b776449f.svg"},662502:e=>{e.exports="https://s.pinimg.com/webapp/wowGrid-9e62e75a.svg"},239784:e=>{e.exports="https://s.pinimg.com/webapp/wowStatic-d966adbd.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/94334-5cebeabd50e988b1.mjs.map